<link rel="import" href="/static/bower_components/paper-card/paper-card.html">
<link rel="import" href="/static/bower_components/polymer/polymer.html">
<link rel="import" href="/static/bower_components/paper-material/paper-material.html">
<link rel="import" href="/static/bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="/static/bower_components/paper-dialog-scrollable/paper-dialog-scrollable.html">
 <link rel="import" href="/static/bower_components/neon-animation/neon-animations.html">
     <link rel="import" href="/static/bower_components/iron-flex-layout/classes/iron-flex-layout.html">
     <link rel="import" href="/static/bower_components/iron-flex-layout/iron-flex-layout.html">

<script src="/static/page.js/page.js"></script>

<dom-module id="des-thumb">

<style>

    :host {
      display: block;
      height : 200px;
      width: 200px;
      margin: 15px;
      float : left;
      background-color: white;
    }

    paper-card {
      width: 200px;
      height: 200px;
      margin-bottom: 0px;
    }

    .mycard{
      width: 200px;
      height: 200px;
      margin-bottom: 0px;
      font-size: 15px;
      color : var(--paper-pink-500);
    }

    .pink {
       
      --paper-card-header-color: var(--paper-green-500);
    }

    paper-material{
      height: 100%;
      width: 100%;
      background-color: white;
      border-radius: 5px;
      padding: 10px;
    }


    paper-material:hover .mycolors{
      visibility: visible;
    }

    .mycolors{
      color: pink;
      visibility: hidden;
    }
    
    .mycolors:hover{
      color:green;
    }

    paper-dialog {
      position: fixed;
      max-width: 60%;
      top: 16px;
    }

</style>

<template>
      <paper-material elevation="[[_elevation]]" on-mouseover="_mouseover" on-mouseout="_mouseout" on-click="openBig">
      <div class="mycard"> <div style="position:absolute;"> <span>{{_returnName(imtitle)}}</span> </div> <img src={{imdisplay}} height="200px" width="200px" /> 
      <div style="position:absolute; right:10px; bottom:10px"> 
      <paper-icon-button id="downid" icon="file-download" class="mycolors" on-click="download">
      </paper-icon-button>
      </div> 
      <div style="position:absolute; left:10px; bottom:10px"> 
      <paper-icon-button id="infoid" icon="info" class="mycolors">
      </paper-icon-button>
      </div> 
      </div>
      <!--<paper-card heading="{{imtitle}}" class="pink" image="{{imdisplay}}">
    <paper-icon-button icon="power-settings-new" ></paper-icon-button>
      </paper-card>-->
      </paper-material>
    <div class="horizontal layout center-justified" >
      <paper-dialog id="{{_returnName(imtitle)}}" entry-animation="scale-up-animation" exit-animation="fade-out-animation" with-backdrop>
      <h2>{{_returnName(imtitle)}}</h2>
      <img class = "Image" src={{imdisplay}} />
        <div class="buttons">
        <paper-button dialog-dismiss raised>Close</paper-button>
        <paper-button on-click="download" raised> Download</paper-button>
      </div>
    </paper-dialog>
    </div>

</template>

<script>
    (function(){
      Polymer({
      is: "des-thumb",
      properties: {
        _elevation:{
          type: Number,
          value: 0,
        },
        imdisplay:{
          value: "/static/uploads/test1.png"
        },
        imtitle:{
          type: String,
        },

      },

      _returnName: function(imtitle) {
        return imtitle;
      },
      

      _mouseout: function(){
      this._elevation = 0;
       },
      
      _mouseover: function(){
      this._elevation = 5;
      },

      openBig: function(event){
        console.log(this.imtitle);
        var dialog = document.getElementById(this.imtitle);
        var dialog_img = document.getElementById(this.imtitle).getElementsByClassName("Image")[0];
        //var ww = ($(window).width())/2.-dialog_img.width/2.;
        //console.log(dialog_img.width+'px');
        //dialog.style.left=ww+"px";
        dialog.open();
      },

      download: function(event){
        event.stopPropagation();
        var link = document.createElement('a');
        link.href = this.imdisplay;
        if (link.download !== undefined){
            //Set HTML5 download attribute. This will prevent file from opening if supported.
            var fileName = this.imdisplay.substring(this.imdisplay.lastIndexOf('/') + 1, this.imdisplay.length);
            link.download = fileName;
          }
          if (document.createEvent) {
            var e = document.createEvent('MouseEvents');
            e.initEvent('click' ,true ,true);
            link.dispatchEvent(e);
            return true;
          }

            var query = '?download';
            window.open(this.imdisplay + query);
     //window.open(this.imdisplay,'_self');
     }


    
    });
    })();
</script>

</dom>

